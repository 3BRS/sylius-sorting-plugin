{% import _self as tree %}

{% macro render(taxons) %}
	{% import _self as tree %}

	<ul class="list-group border-0">
		{% for taxon in taxons %}
			<li class="list-group-item border-0 p-2" data-id="{{ taxon.id }}" {% if taxon.children is not empty %} data-sylius-js-tree-parent="{{ taxon.id }}" {% endif %}>
				<div class="d-flex align-items-center">
					<div class="me-2" {% if taxon.children is not empty %} data-sylius-js-tree-trigger="{{ taxon.id }}" {% endif %}>
						{% if taxon.children is not empty %}
							{{ ux_icon('bi:caret-down-fill', {class: 'w-3 h-3'}) }}
						{% else %}
							{{ ux_icon('bi:chevron-right', {class: 'w-3 h-3'}) }}
						{% endif %}

					</div>
					<div>
						<a href="{{ path('threebrs_admin_sorting_products', {'taxonId': taxon.id}) }}" class="text-dark text-decoration-none fw-semibold">
							{{ taxon.name }}
						</a>
					</div>
				</div>
				{{ tree.render(taxon.children) }}
			</li>
		{% endfor %}
	</ul>
{% endmacro %}

<div
	class="card p-3 sylius-tree" data-sylius-js-tree>
	{# ADD d-none  above after you fix stimulus controller#}
	<a href="#" class="mb-2 d-inline-block text-decoration-none" data-sylius-js-tree-trigger>
		{{ ux_icon('bi:arrows-collapse', {class: 'w-3 h-3'}) }}
		{{ 'sylius.ui.toggle_all'|trans }}
	</a>
	{{ tree.render(this.tree) }}
</div>
